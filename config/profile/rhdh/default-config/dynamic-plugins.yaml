#apiVersion: v1
#kind: ConfigMap
#metadata:
#  name: default-dynamic-plugins #  must be the same as (deployment.yaml).spec.template.spec.volumes.name.dynamic-plugins-conf.configMap.name
#data:
#  "dynamic-plugins.yaml": |
#    ###########################################################################################################
#    # /!\ WARNING
#    #
#    # This is the default dynamic plugins configuration file created and managed by the Operator for your CR.
#    # Do NOT edit this manually in the Cluster, as your changes will be overridden by the Operator upon the
#    # next reconciliation.
#    # If you want to customize the dynamic plugins, you should create your own dynamic-plugins ConfigMap
#    # and reference it in your CR.
#    # See https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.4/html/installing_and_viewing_plugins_in_red_hat_developer_hub/rhdh-installing-rhdh-plugins_title-plugins-rhdh-about#proc-config-dynamic-plugins-rhdh-operator_rhdh-installing-rhdh-plugins
#    # for more details or https://github.com/redhat-developer/rhdh-operator/blob/main/examples/rhdh-cr.yaml
#    # for an example.
#    ###########################################################################################################
#    includes:
#      - dynamic-plugins.default.yaml
#    plugins: []
#---
apiVersion: v1
kind: ConfigMap
metadata:
  name: default-dynamic-plugins
data:
  dynamic-plugins.yaml: |
    includes:
      - dynamic-plugins.default.yaml
    plugins:
      - disabled: true
        package: "@redhat/backstage-plugin-orchestrator@1.7.0"
        integrity: sha512-HpyV/5yBh2wBVaF93dMBzm4oggEvILX2pXao0w7iUxJeWFC31iXj4rpviBZJrH1UlyJcuXgaJ2N0oYT8wZ/c6Q==
        pluginConfig:
          dynamicPlugins:
              frontend:
                red-hat-developer-hub.backstage-plugin-orchestrator:
                  appIcons:
                    - importName: OrchestratorIcon
                      name: orchestratorIcon
                  dynamicRoutes:
                    - importName: OrchestratorPage
                      menuItem:
                        icon: orchestratorIcon
                        text: Orchestrator
                      path: /orchestrator
                  entityTabs:
                    - path: /workflows
                      title: Workflows
                      mountPoint: entity.page.workflows
                  mountPoints:
                    - mountPoint: entity.page.workflows/cards
                      importName: OrchestratorCatalogTab
                      config:
                        layout:
                          gridColumn: '1 / -1'
                          if:
                            anyOf:
                              - IsOrchestratorCatalogTabAvailable
      - disabled: true
        package: "@redhat/backstage-plugin-orchestrator-backend-dynamic@1.7.0"
        integrity: sha512-CRqcbfTFQqqHbUUl89rz5cCK5HdKEVQ1/IqZekYjec/9hFra36y37AZm2PiwjdW7/aqnvM14TnLIjI1MU8NXZw==
        pluginConfig:
          orchestrator:
            dataIndexService:
              url: http://sonataflow-platform-data-index-service
        dependencies:
          - ref: sonataflow
      - disabled: true
        package: "@redhat/backstage-plugin-scaffolder-backend-module-orchestrator-dynamic@1.7.0"
        integrity: sha512-XeR78NJCLVCBPUWNDWiojckLOF3ASIsPTyaYbH0WB2ko8de/bgZ4QVzMo5FXK1xK6TwRgUVY4M3JRpSY7dxm6Q==
        pluginConfig:
          orchestrator:
            dataIndexService:
              url: http://sonataflow-platform-data-index-service               
      - disabled: true
        package: "@redhat/backstage-plugin-orchestrator-form-widgets@1.7.0"
        integrity: sha512-uqzL/O2sZB74XS95rma4ZHMaWwII9JIHFHWNoRRP8LVrKC4LNiPpUr4dhnOsWG3erQeTz4jK2X7gWYo47w7zXA==
        pluginConfig:
          dynamicPlugins:
            frontend:
              red-hat-developer-hub.backstage-plugin-orchestrator-form-widgets: { }
